# ============================================================
# ENVIRONMENT VARIABLES - RELOJES BV BENI
# ============================================================
# [PAY-22] Environment Configuration per Environment
# Ticket: AND-31
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env.local for development
# 2. Fill in your actual values (get from team/dashboard)
# 3. NEVER commit .env.local to version control
# 4. For production, set these in your hosting platform
# ============================================================

# ------------------------------------------------------------
# NODE ENVIRONMENT (Set automatically by Next.js)
# ------------------------------------------------------------
# This is set automatically, but you can override for testing:
# - development: npm run dev
# - production: npm run build && npm start
# - test: npm test
# NODE_ENV=development

# ------------------------------------------------------------
# STRAPI CMS API
# ------------------------------------------------------------
# URL of your Strapi backend API
#
# Development: http://localhost:1337
# Production: Your deployed Strapi URL (must be HTTPS)
#
# Example:
# NEXT_PUBLIC_STRAPI_API_URL=https://api.relojes-bv-beni.com
NEXT_PUBLIC_STRAPI_API_URL=http://localhost:1337

# ------------------------------------------------------------
# STRIPE PAYMENT GATEWAY
# ------------------------------------------------------------
# [PAY-22] Environment-specific Stripe keys
# Get your keys from: https://dashboard.stripe.com/apikeys
#
# ⚠️ IMPORTANT: Use different keys for each environment!
# ============================================================

# PUBLIC KEY (Safe to expose in browser)
# This key is embedded in your frontend bundle
#
# Development/Test: Starts with "pk_test_" followed by 40+ characters
# Production: Starts with "pk_live_" followed by 40+ characters
#
# The application will automatically validate:
# - Development must use pk_test_* keys
# - Production must use pk_live_* keys
# - Format must be correct
#
# Get test keys: https://dashboard.stripe.com/test/apikeys
# Get live keys: https://dashboard.stripe.com/apikeys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# SECRET KEY (NEVER expose in browser - server-side only)
# This key has full access to your Stripe account
#
# Development/Test: Starts with "sk_test_" followed by 40+ characters
# Production: Starts with "sk_live_" followed by 40+ characters
#
# ⚠️ CRITICAL SECURITY:
# - This key should NEVER have the NEXT_PUBLIC_ prefix
# - Never log this key
# - Never commit this key to version control
# - Only used in API routes (server-side)
# - Rotate immediately if accidentally exposed
STRIPE_SECRET_KEY=sk_test_your_secret_key_here

# ------------------------------------------------------------
# ENVIRONMENT-SPECIFIC CHECKLIST
# ------------------------------------------------------------
# Before deploying to each environment, verify:
#
# ✅ DEVELOPMENT:
#   - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY starts with pk_test_
#   - STRIPE_SECRET_KEY starts with sk_test_
#   - NEXT_PUBLIC_STRAPI_API_URL points to localhost or dev server
#   - All test data is clearly marked
#
# ✅ STAGING (if you have one):
#   - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY starts with pk_test_
#   - STRIPE_SECRET_KEY starts with sk_test_
#   - NEXT_PUBLIC_STRAPI_API_URL points to staging server (HTTPS)
#   - Test with production-like data
#
# ✅ PRODUCTION:
#   - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY starts with pk_live_
#   - STRIPE_SECRET_KEY starts with sk_live_
#   - NEXT_PUBLIC_STRAPI_API_URL points to production server (HTTPS)
#   - All URLs use HTTPS
#   - Keys are different from development/staging
#   - Stripe webhook endpoints configured
#
# ------------------------------------------------------------
# SECURITY BEST PRACTICES
# ------------------------------------------------------------
# 1. ✅ Use test keys (pk_test_*, sk_test_*) in development
# 2. ✅ Use live keys (pk_live_*, sk_live_*) in production only
# 3. ✅ Never commit .env.local to version control
# 4. ✅ Never expose secret keys (sk_*) to the browser
# 5. ✅ Never use NEXT_PUBLIC_ prefix for secret keys
# 6. ✅ Use different keys for each environment
# 7. ✅ Rotate keys immediately if accidentally exposed
# 8. ✅ Enable HTTPS in production (required for payments)
# 9. ✅ Set up proper CORS for your Strapi API
# 10. ✅ Monitor Stripe dashboard for suspicious activity
#
# ------------------------------------------------------------
# TROUBLESHOOTING
# ------------------------------------------------------------
# Error: "Stripe publishable key is not configured"
#   → Make sure you copied .env.example to .env.local
#   → Make sure NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY is set
#
# Error: "Invalid Stripe publishable key format"
#   → Check that your key starts with pk_test_ or pk_live_
#   → Make sure you didn't accidentally use a secret key (sk_*)
#
# Error: "Development environment must use test keys"
#   → You're trying to use pk_live_* in development
#   → Use pk_test_* keys for local development
#
# Error: Payments not working in production
#   → Make sure you're using pk_live_* and sk_live_* keys
#   → Verify HTTPS is enabled
#   → Check Stripe dashboard for error logs
#
# ============================================================
# GETTING YOUR KEYS
# ============================================================
# 1. Sign up/login at: https://dashboard.stripe.com
# 2. For TEST keys: https://dashboard.stripe.com/test/apikeys
# 3. For LIVE keys: https://dashboard.stripe.com/apikeys
#    (You'll need to activate your account first)
# ============================================================

# ------------------------------------------------------------
# RESEND EMAIL SERVICE
# ------------------------------------------------------------
# [ORD-20] Email notifications for order status changes
# Get your API key from: https://resend.com/api-keys
#
# ⚠️ IMPORTANT: 
# - Never expose this key in client-side code
# - Never use NEXT_PUBLIC_ prefix
# - Server-side only (API routes)
# ============================================================

# API KEY (NEVER expose in browser - server-side only)
# Development/Production: Starts with "re_" followed by characters
#
# Get your key: https://resend.com/api-keys
# 
# ⚠️ CRITICAL SECURITY:
# - This key should NEVER have the NEXT_PUBLIC_ prefix
# - Never log this key
# - Never commit this key to version control
# - Only used in API routes (server-side)
# - Rotate immediately if accidentally exposed
RESEND_API_KEY=re_your_api_key_here

# FROM EMAIL
# The email address to send notifications from
#
# Development: onboarding@resend.dev (Resend's test domain)
# Production: pedidos@relojesbvbeni.com (your verified domain)
#
# Note: For production, you must verify your domain in Resend dashboard
# https://resend.com/domains
RESEND_FROM_EMAIL=onboarding@resend.dev

# WEBHOOK SECRET (for Strapi → Next.js communication)
# Shared secret to authenticate webhook calls from Strapi
#
# Generate a random secret: openssl rand -base64 32
# Or use: https://generate-secret.vercel.app/32
#
# This same value must be set in your Strapi backend
WEBHOOK_SECRET=your_webhook_secret_here_generate_random_string

# DEV EMAIL OVERRIDE
# Development: Emails sent to this address instead of customers
# Production: Leave empty to send to actual customers
#
# This prevents accidentally spamming real customers during testing
# Example: andresjpadev@gmail.com
DEV_EMAIL=

# ------------------------------------------------------------
# RESEND TROUBLESHOOTING
# ------------------------------------------------------------
# Error: "Resend API key is not configured"
#   → Make sure you copied .env.example to .env.local
#   → Make sure RESEND_API_KEY is set
#
# Error: "Invalid Resend API key format"
#   → Check that your key starts with re_
#   → Get a new key from https://resend.com/api-keys
#
# Error: "Email delivery failed: Domain not verified"
#   → In development: Use onboarding@resend.dev
#   → In production: Verify your domain at https://resend.com/domains
#
# Error: Emails not arriving
#   → Check Resend dashboard logs: https://resend.com/emails
#   → Check spam folder
#   → Verify recipient email is correct
#
# ============================================================
# GETTING STARTED WITH RESEND
# ============================================================
# 1. Sign up at: https://resend.com
# 2. Get API key: https://resend.com/api-keys
# 3. For production: Verify domain at https://resend.com/domains
# 4. Monitor emails: https://resend.com/emails
# ============================================================
